<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Inventory App</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        input, button { margin: 5px; padding: 6px; }
    </style>
</head>
<body>
<h2>Inventory System</h2>

<input id="name" placeholder="Item name">
<input id="price" placeholder="Price" type="number">
<input id="qty" placeholder="Quantity" type="number">
<button onclick="addItem()">Add</button>

<table id="tbl">
    <thead><tr><th>ID</th><th>Name</th><th>Price</th><th>Qty</th><th>Action</th></tr></thead>
    <tbody></tbody>
</table>

<script>
    const API = "/api/items";

    async function loadItems(){
      const res = await fetch(API);
      const data = await res.json();
      const tbody = document.querySelector("#tbl tbody");
      tbody.innerHTML = "";
      data.forEach(it => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${it.id}</td>
                        <td>${it.name}</td>
                        <td>${it.price}</td>
                        <td>${it.quantity}</td>
                        <td>
                          <button onclick="del(${it.id})">Delete</button>
                        </td>`;
        tbody.appendChild(tr);
      });
    }

    async function addItem(){
      const name = document.getElementById("name").value;
      const price = parseFloat(document.getElementById("price").value);
      const qty = parseInt(document.getElementById("qty").value);
      await fetch(API, {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({name, price, quantity: qty})
      });
      loadItems();
    }

    async function del(id){
      await fetch(API+"/"+id, {method:"DELETE"});
      loadItems();
    }

    loadItems();
</script>
</body>
</html>
